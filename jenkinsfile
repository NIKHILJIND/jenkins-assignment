@Library('email-lib')_

pipeline {
    agent any
    stages {
        stage('fetch') {
            steps {
                echo "fetching inputs....";
             }
        }
        stage('run') {
            steps {
                echo "running scripts...";
             }
        }
        stage('test') {
            steps {
                echo "testing...";
             }
        }
        stage('deploy') {
            steps {
                echo "deploying.....";
             }
        }
    }
    post {
        success {
                echo "Success Emailing the Results";
                script {
                    my_list = [${env.BUILD_STATUS}, ${env.BUILD_ID}, "system-integrations"]
                    email_results.run_email_script(my_list)
                }
        }
        failure {
                echo "failed Emailing the Results";
                script {
                    my_list = [${env.BUILD_STATUS}, ${env.BUILD_ID}, "system-integrations"]
                    email_results.run_email_script(my_list)
                }
        }
    }
}
